"use strict";const t=require("../../common/vendor.js"),e=require("../../common/assets.js"),o={name:"bgyxedit",props:{taskinfodtv:{type:Array,default:()=>[{type:"text",value:"",f:!1}]},mtype:{type:Array,default:()=>["text","img","video"]},uploadurl:{type:String,default:""},showdone:{type:Boolean,default:!1},filename:{type:String,default:"uploadfile"}},data:()=>({htmlinfo:""}),methods:{returnthisinfo:function(){console.log(this.taskinfodtv),this.$emit("bgyxchange",this.returninfo())},returninfo:function(){var t=this.taskinfodtv,e="";for(var o in t){var i=t[o];i.value&&("text"==i.type&&(e=e+'<p style="margin:5px auto;">'+i.value+"</p>"),"img"==i.type&&(e=e+'<p style="text-align:center;margin:5px auto;"><img style="width:300px;margin:auto;" src="'+i.value+'"></p>'),"video"==i.type&&(e=e+'<p style="text-align:center;margin:5px auto;"><video controls="controls" style="width:300px;margin:auto;" src="'+i.value+'"></video></p>'))}return e?{html:e='<p style="text-align:center;margin:5px auto;">'+e+"</p>",data:t}:{html:"",data:t}},addvuetype:function(e){var o=this;0==e&&this.taskinfodtv.push({type:"text",value:"",f:!0}),1==e&&t.index.chooseImage({count:1,success:e=>{const i=e.tempFilePaths;t.index.showLoading({title:"上传中..."}),t.index.uploadFile({url:o.uploadurl,filePath:i[0],name:"img",success:e=>{console.log(e.data);var i=e.data;o.taskinfodtv.push({type:"img",value:i}),o.$emit("bgyxchange",o.returninfo()),t.index.hideLoading()}})}}),2==e&&t.index.chooseVideo({count:1,sourceType:["camera","album"],success:function(e){var i=e.tempFilePath;t.index.showLoading({title:"上传中..."}),t.index.uploadFile({url:o.uploadurl,filePath:i,name:"video",success:e=>{console.log(e.data);var i=e.data;o.taskinfodtv.push({type:"video",value:i}),o.$emit("bgyxchange",o.returninfo()),t.index.hideLoading()}})}})},delthisel:function(e){var o=this,i=this.taskinfodtv;t.index.showActionSheet({itemList:["↑上移↑","↓下移↓","删除"],success:function(t){var n=t.tapIndex;if(console.log(n),0==n&&e>0){var a=i[e];for(var s in i[e]=i[e-1],i[e-1]=a,o.taskinfodtv=[],i)o.taskinfodtv.push(i[s]);o.$emit("bgyxchange",o.returninfo()),console.log(o.taskinfodtv)}if(1==n&&e<i.length-1){a=i[e];for(var s in i[e]=i[e+1],i[e+1]=a,o.taskinfodtv=[],i)o.taskinfodtv.push(i[s]);o.$emit("bgyxchange",o.returninfo()),console.log(o.taskinfodtv)}2==n&&(o.taskinfodtv.splice(e,1),o.$emit("bgyxchange",o.returninfo()),console.log(o.taskinfodtv))},fail:function(t){console.log(t.errMsg)}})}}};const i=t._export_sfc(o,[["render",function(o,i,n,a,s,d){return t.e({a:t.f(n.taskinfodtv,((e,o,i)=>t.e({a:"text"==e.type},"text"==e.type?{b:t.o((t=>d.returnthisinfo())),c:t.o([t=>n.taskinfodtv[o].value=t.detail.value,t=>d.returnthisinfo()]),d:t.o((t=>d.returnthisinfo())),e:e.f,f:n.taskinfodtv[o].value,g:t.o((t=>d.delthisel(o)))}:{},{h:"img"==e.type},"img"==e.type?{i:t.o((t=>d.delthisel(o))),j:n.taskinfodtv[o].value}:{},{k:"video"==e.type},"video"==e.type?{l:t.o((t=>d.delthisel(o)))}:{}))),b:n.showdone},n.showdone?{c:t.o((t=>d.returnthisinfo())),d:e._imports_0$1}:{},{e:t.o((t=>d.addvuetype(0))),f:e._imports_1,g:t.o((t=>d.addvuetype(1))),h:e._imports_2,i:t.o((t=>d.addvuetype(2))),j:e._imports_3})}]]);wx.createComponent(i);
