"use strict";const e=require("../common/vendor.js"),t=require("../store/user.js"),o=require("./config.js");exports.request=n=>{const{method:i,url:s,data:r,timeout:u=o.config.timeOut,header:a={}}=n,d=t.useUserStore().userinfo.token;return d.length>0&&(a.token=d),a["content-type"]="application/json;charset=UTF-8",e.index.showLoading({title:"加载中"}),new Promise(((t,n)=>{e.index.request({header:a,method:i,timeout:o.config.timeOut,url:o.config.baseUrl+s,data:r,success:({data:o})=>{o.success?t(o):(2005==o.code&&e.index.navigateTo({url:"/pages/index/login"}),e.index.showToast({title:o.msg,duration:2e3,icon:"none"}))},fail:e=>{n(e)},complete:()=>{e.index.hideLoading(),e.index.stopPullDownRefresh()}})}))};
