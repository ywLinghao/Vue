"use strict";const e=require("../../common/vendor.js"),s=require("../../common/assets.js"),o=require("../../store/user.js"),r=require("../../http/index.js");if(require("../../http/request.js"),require("../../http/config.js"),!Array){(e.resolveComponent("uni-easyinput")+e.resolveComponent("uni-forms-item")+e.resolveComponent("uni-forms"))()}Math||((()=>"../../uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput.js")+(()=>"../../uni_modules/uni-forms/components/uni-forms-item/uni-forms-item.js")+(()=>"../../uni_modules/uni-forms/components/uni-forms/uni-forms.js"))();const i={__name:"login",setup(i){const n=o.useUserStore(),t=e.ref(null),a=e.reactive({email:"",password:""}),u={email:{rules:[{required:!0,errorMessage:"必填项"},{format:"email",errorMessage:"邮件格式错误"}]}},m=()=>{t.value.validate((()=>{r.postRequest("api/mobile/elogin",a).then((s=>{s.success?(n.fillUser(s.data.userinfo),e.index.switchTab({url:"/pages/my/my"})):e.index.showToast({title:s.msg})})).catch((s=>{e.index.showToast({title:"网络连接错误"})}))}))};function l(){e.index.navigateTo({url:"/pages/index/register",success(e){console.log(e)},fail(e){console.log(e)}})}return(o,r)=>({a:s._imports_0,b:e.o((e=>a.email=e)),c:e.p({placeholder:"请输入电子邮箱","suffix-icon":"email",modelValue:a.email}),d:e.p({name:"email"}),e:e.o((e=>a.password=e)),f:e.p({type:"password",placeholder:"请输入密码",modelValue:a.password}),g:e.p({name:"password"}),h:e.o(m),i:e.o(l),j:e.sr(t,"97bc563a-0",{k:"myForm"}),k:e.p({modelValue:a,rules:u})})}},n=e._export_sfc(i,[["__scopeId","data-v-97bc563a"]]);wx.createPage(n);
