"use strict";const e=require("../../common/vendor.js"),s=require("../../store/user.js"),o={data:()=>({}),methods:{login(){e.index.getUserProfile&&e.index.getUserProfile({lang:"zh_CN",desc:"用来授权登录该小程序！",success:o=>{e.index.login({provider:"weixin",onlyAuthorize:!0,success:function(t){const{code:i}=t,n={appid:"wx61baab1c4aae2e47",secret:"c68984e75aadd11d80b3fb78cc087aff",js_code:i,grant_type:"authorization_code"};e.index.request({url:"https://api.weixin.qq.com/sns/jscode2session",method:"GET",data:n,success:t=>{const i=s.useUserStore(),{data:n}=t;i.setToken(n.openid),i.fillUser(o.userInfo),e.index.showToast({title:"登录成功"}),e.index.switchTab({url:"/pages/my/my"})}})},fail:function(s){e.index.showToast({title:"登录失败"})}})}})}}};const t=e._export_sfc(o,[["render",function(s,o,t,i,n,r){return{a:e.o(((...e)=>r.login&&r.login(...e)))}}]]);wx.createPage(t);
